<import src="./row.wxml" />
<view class="fc-datagrid {{(affixable && affixList.length) || ($vlShowList && $vlShowList.length) ? 'has-data':''}} {{outerClass}}">
    <view
        class="fc-datagrid-head fc-datagrid-row"
        bindtap="tapRow"
        bindlongpress="longpressRow"
    >
        <view
            wx:for="{{cols}}"
            wx:for-item="col"
            wx:key="field"
            class="fc-datagrid-col fc-i{{index}} {{index===cols.length-1?'fc-last':''}} {{col.wrap===false?'fc-nowrap':''}}"
            style="width:{{columnWidthMap[col.field]}}%;"
            bindtap="tapCell"
            data-col="{{index}}"
        >
            <view wx:if="{{col.title}}" class="fc-datagrid-col-title">{{col.title}}</view>
            <view wx:if="{{col.subTitle}}" class="fc-datagrid-col-subtitle">{{col.subTitle}}</view>
        </view>
    </view>
    <!-- 吸顶的数据 -->
    <view wx:if="{{affixable && affixList.length}}" class="fc-datagrid-affix">
        <template
            is="data-grid-row"
            wx:for="{{affixList}}"
            wx:for-item="row"
            wx:for-index="rowIndex"
            data="{{row, rowIndex,type:'affix',selectedMap, cols, rowClass, columnWidthMap, vlItemHeight}}"
        ></template>
    </view>
    <!-- 正常的数据 -->
    <view class="fc-datagrid-scroll" style="margin-top:{{scrollMarginTop}}px;">
        <%= VirtualListStart %>
            <template
                is="data-grid-row"
                data="{{row:$vlItem,rowIndex:$vlItem.$vlIndex,selectedMap, cols, rowClass, columnWidthMap, vlItemHeight}}"
            ></template>
        <%= VirtualListEnd %>
    </view>
</view>